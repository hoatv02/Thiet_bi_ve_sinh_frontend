<section class="container-app my-6 md:my-10 px-4 sm:px-0">
  <div class="text-xs sm:text-sm text-gray-500 mb-4 sm:mb-6">



    <a (click)="goHome()" class="hover:text-[#00456F]">Trang chủ</a> /
    <a (click)="goCart()" class="hover:text-[#00456F]">Giỏ hàng</a>
  </div>
  <div class="flex items-center justify-between border-b  bg-[#F8F8F8] pr-2 sm:px-0">
    <h2 class="text-base sm:text-lg font-bold text-gray-900 border-l-4 border-blue-400 pl-2 pb-2 pt-2">
      GIỎ HÀNG
    </h2>
    <lucide-icon name="shopping-cart" class="w-4 h-4 sm:w-5 sm:h-5 text-gray-600 mr-1 sm:mr-2"></lucide-icon>
  </div>
  <div class="space-y-2 sm:space-y-3">
    @for (item of cartItems; track item.id) {
    <div class="bg-gray-50 p-3 sm:p-4 rounded-md">
      <div class="block sm:hidden">
        <div class="flex justify-between items-start mb-3">
          <div class="flex items-start gap-3 flex-1 min-w-0">
            <img [src]="item.mainImageUrl" alt="{{ item.name }}" class="w-14 h-14 object-contain flex-shrink-0" />
            <div class="min-w-0 flex-1">
              <p class="font-semibold text-gray-800 text-sm truncate">
                {{ item.name }}
              </p>
              <p class="text-xs text-gray-500 mt-1">
                Mã sản phẩm: {{ item.sku }}
              </p>
            </div>
          </div>
          <button (click)="removeItem(item)" class="flex items-center justify-center
                   w-7 h-7 rounded-full ml-2
                   border border-gray-200 bg-white
                   text-gray-700
                   hover:border-red-500 hover:text-red-500
                   transition-colors flex-shrink-0">
            <lucide-icon name="x" class="w-3 h-3"></lucide-icon>
          </button>
        </div>
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2">
            <button (click)="decreaseQty(item)"
              class="w-6 h-6 flex items-center justify-center rounded-md border border-gray-300 text-gray-600 hover:text-[#00456F] ">
              −
            </button>
            <span class="w-8 text-center text-sm font-medium">
              {{ item.quantity }}
            </span>
            <button (click)="increaseQty(item)"
              class="w-6 h-6 flex items-center justify-center rounded-md border border-gray-300 text-gray-600"
              [ngClass]="{ 'text-[#3AA7E9]': item.quantity <= item.lastQuantity }">
              +
            </button>
          </div>
          <div class="text-right">
            <p class="font-semibold text-gray-800 text-[15px]">
              {{ item.price | number:'1.0-0':'vi' }}đ
            </p>
          </div>
        </div>
      </div>

      <!-- Desktop layout - giữ nguyên grid cũ -->
      <div class="hidden sm:grid items-center gap-4
                  grid-cols-[minmax(0,9fr)_minmax(0,2fr)_minmax(0,2fr)_auto]">
        <!-- Thông tin -->
        <div class="flex items-center gap-3 min-w-0">
          <img [src]="item.mainImageUrl" alt="{{ item.name }}" class="w-16 h-16 object-contain flex-shrink-0" />
          <div class="min-w-0">
            <p class="font-semibold text-gray-800 text-sm truncate">
              {{ item.name }}
            </p>
            <p class="text-xs text-gray-500">
              Mã sản phẩm: {{ item.sku }}
            </p>
          </div>
        </div>

        <!-- Số lượng -->
        <div class="flex items-center justify-center gap-2">
          <button (click)="decreaseQty(item)"
            class="w-6 h-6 flex items-center justify-center rounded-md border border-gray-300 text-gray-600 hover:text-[#00456F] ">
            −
          </button>
          <span class="w-8 text-center text-sm font-medium">
            {{ item.quantity }}
          </span>
          <button (click)="increaseQty(item)"
            class="w-6 h-6 flex items-center justify-center rounded-md border border-gray-300 text-gray-600"
            [ngClass]="{ 'text-[#3AA7E9]': item.quantity <= item.lastQuantity }">
            +
          </button>
        </div>

        <!-- Giá -->
        <div class="text-right">
          <p class="font-semibold text-gray-800 text-[16px]">
            {{ item.salePrice | number:'1.0-0':'vi'}}đ
          </p>
        </div>

        <!-- Xóa -->
        <button (click)="removeItem(item)" class="flex items-center justify-center
         w-8 h-8 rounded-full
         border border-gray-200 bg-white
         text-gray-700
         hover:border-red-500 hover:text-red-500
         transition-colors">
          <lucide-icon name="x" class="w-3 h-3"></lucide-icon>
        </button>
      </div>
    </div>
    }
  </div>

  <!-- Tổng tiền -->
  <div class="flex justify-end mt-2 sm:mt-4">
    <div class="text-right">
      <p class="text-gray-700 text-base sm:text-[18px]">
        Tổng số tiền:
        <span class="font-bold text-base sm:text-lg text-black ml-1">
          {{ getTotal()| number:'1.0-0':'vi' }}đ
        </span>
      </p>
    </div>
  </div>

  <!-- Nút hành động -->
  <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mt-6 sm:mt-8">
    <button routerLink="/"
      class="w-full sm:w-auto border border-blue-400 text-[#3AA7E9] px-4 sm:px-6 py-2 rounded-md text-sm font-medium hover:bg-blue-50 transition order-2 sm:order-1">
      Tìm mặt hàng khác
    </button>

    <button
      class="w-full sm:w-auto bg-[#3AA7E9] hover:bg-[#00456F] text-white px-4 sm:px-8 py-2 rounded-md font-semibold order-1 sm:order-2"
      routerLink="/checkout">
      Đặt hàng
    </button>
  </div>
</section>